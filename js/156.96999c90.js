"use strict";(self["webpackChunkmonstorm_fe"]=self["webpackChunkmonstorm_fe"]||[]).push([[156],{9156:(e,l,a)=>{a.r(l),a.d(l,{default:()=>I});var o=a(3673),t=a(2323),d=a(1959),i=a(9582),s=a(8825),r=a(5616);const n=(0,o._)("div",{class:"text-subtitle1"},"Booking Details",-1),u={class:"row"},c={class:"col-12 col-md"},m={class:"col-12 col-md"},p={class:"row items-center justify-end"},g={class:"row items-center justify-end"},_=(0,o._)("div",{class:"text-subtitle1 q-mb-sm"},"Customer Information",-1),b={class:"row"},y={class:"col-12 col-md"},v={class:"col-12 col-md"},f={setup(e){const{formatDate:l}=r.ZP,a=(0,o.f3)("store"),f=(0,s.Z)(),q=e=>{if(!/\d/.test(e.key)&&"."!==e.key)return e.preventDefault()},w=(0,d.qj)(JSON.parse(localStorage.getItem("user")));a.dispatch("getAllProducts");(0,d.iH)(null),(0,d.iH)(null);const S=(0,d.iH)(!1),U=(0,i.tv)(),k=e=>e>=l(Date.now(),"YYYY/MM/DD"),V=async()=>{S.value=!0,S?setTimeout((async()=>{await F(),S.value=!1}),1e3):setTimeout((()=>{update(),S.value=!1}),1e3)};f.iconSet.arrow.dropdown="expand_more";const h=(0,o.Fl)((()=>a.getters.allProducts)),W=(0,d.iH)(0),D=(0,d.iH)("Date"),Z=(0,d.qj)({address:w.address,phone_number:w.phone_number,quantity:1,status:0,pickup_date:null}),Q=(0,o.Fl)((()=>{let e=Z.product_id.id,l="Free Delivery"===Z.booking_type?Z.delivery_date:null,a="Pickup Item"===Z.booking_type?Z.pickup_date:null;return{...Z,product_id:e,pickup_date:a,delivery_date:l}})),C=e=>{W.value=String(Number(e.price*Z.quantity).toFixed(3).slice(0,-1))},F=async()=>{await a.dispatch("createTransaction",Q.value).then((e=>{200==e.status&&f.notify({message:"Transaction added Successfully",caption:"Your transaction is being processed",color:"primary"})})).catch((e=>{f.notify({message:"Something went wrong",color:"negative"}),console.log(e)})),U.back()},P=e=>{W.value=String(Number(Z.product_id.price*e.target.value).toFixed(3).slice(0,-1))},j=e=>{D.value="Free Delivery"===e?"Delivery Date":"Pickup Date"};return(e,l)=>{const a=(0,o.up)("q-select"),i=(0,o.up)("q-input"),s=(0,o.up)("q-btn-group"),r=(0,o.up)("q-btn"),w=(0,o.up)("q-date"),U=(0,o.up)("q-popup-proxy"),Q=(0,o.up)("q-icon"),F=(0,o.up)("q-spinner-facebook"),x=(0,o.up)("q-card-actions"),I=(0,o.up)("q-form"),T=(0,o.up)("q-card"),B=(0,o.up)("q-page"),H=(0,o.Q2)("close-popup");return(0,o.wg)(),(0,o.j4)(B,{class:"q-pl-lg q-ml-md q-mr-md q-pr-lg q-mt-lg items-center"},{default:(0,o.w5)((()=>[n,(0,o.Wm)(T,{class:"shadow-0 q-pb-lg"},{default:(0,o.w5)((()=>[(0,o.Wm)(I,{class:"q-mt-sm",onSubmit:V},{default:(0,o.w5)((()=>[(0,o._)("div",u,[(0,o._)("div",c,[(0,o._)("div",{class:(0,t.C_)((0,d.SU)(f).screen.lt.md?"":"q-pr-lg q-mr-lg")},[(0,o.Wm)(a,{filled:"","bg-color":"indigo-1","transition-show":"jump-up","transition-hide":"jump-up",modelValue:(0,d.SU)(Z).product_id,"onUpdate:modelValue":[l[0]||(l[0]=e=>(0,d.SU)(Z).product_id=e),l[1]||(l[1]=e=>C(e))],options:(0,d.SU)(h),"option-label":e=>e.product_name+" - ₱"+e.price,label:"Product",rules:[e=>!!e||"*Field is required"]},null,8,["modelValue","options","option-label","rules"]),(0,o.Wm)(a,{filled:"","bg-color":"indigo-1","transition-show":"jump-up","transition-hide":"jump-up",class:"q-mt-lg q-mb-lg",modelValue:(0,d.SU)(Z).booking_type,"onUpdate:modelValue":[l[2]||(l[2]=e=>(0,d.SU)(Z).booking_type=e),l[3]||(l[3]=e=>j(e))],options:["Free Delivery","Pickup Item"],label:"Booking Type",rules:[e=>!!e||"*Field is required"]},null,8,["modelValue","rules"])],2)]),(0,o._)("div",m,[(0,o._)("div",{class:(0,t.C_)((0,d.SU)(f).screen.lt.md||(0,d.SU)(f).screen.lt.sm?"":"q-pl-lg q-ml-lg ")},[(0,o.Wm)(s,{spread:"",class:"bg-white border-0 shadow-0"},{default:(0,o.w5)((()=>[(0,o.Wm)(i,{modelValue:(0,d.SU)(Z).quantity,"onUpdate:modelValue":l[4]||(l[4]=e=>(0,d.SU)(Z).quantity=e),modelModifiers:{number:!0},onKeypress:q,"bg-color":"indigo-1",onKeyup:l[5]||(l[5]=e=>P(e)),label:"Quantity",filled:"",rules:[e=>!!e||"*Field is required"]},null,8,["modelValue","rules"]),(0,o.Wm)(i,{class:"q-ml-lg",modelValue:W.value,"onUpdate:modelValue":l[6]||(l[6]=e=>W.value=e),modelModifiers:{number:!0},prefix:"₱",type:"number","bg-color":"indigo-1",label:"Total",filled:"",readonly:""},null,8,["modelValue"])])),_:1}),"Free Delivery"===(0,d.SU)(Z).booking_type?((0,o.wg)(),(0,o.j4)(i,{key:0,label:D.value,filled:"","bg-color":"indigo-1",modelValue:(0,d.SU)(Z).delivery_date,"onUpdate:modelValue":l[8]||(l[8]=e=>(0,d.SU)(Z).delivery_date=e),mask:"date",class:"q-mt-lg",rules:["date"]},{append:(0,o.w5)((()=>[(0,o.Wm)(Q,{name:"event",class:"cursor-pointer"},{default:(0,o.w5)((()=>[(0,o.Wm)(U,{ref:"qDateProxy",cover:"","transition-show":"scale","transition-hide":"scale"},{default:(0,o.w5)((()=>[(0,o.Wm)(w,{modelValue:(0,d.SU)(Z).delivery_date,"onUpdate:modelValue":l[7]||(l[7]=e=>(0,d.SU)(Z).delivery_date=e),options:k},{default:(0,o.w5)((()=>[(0,o._)("div",p,[(0,o.wy)((0,o.Wm)(r,{label:"Save",color:"primary",flat:""},null,512),[[H]])])])),_:1},8,["modelValue"])])),_:1},512)])),_:1})])),_:1},8,["label","modelValue"])):((0,o.wg)(),(0,o.j4)(i,{key:1,label:D.value,filled:"","bg-color":"indigo-1",modelValue:(0,d.SU)(Z).pickup_date,"onUpdate:modelValue":l[10]||(l[10]=e=>(0,d.SU)(Z).pickup_date=e),mask:"date",class:"q-mt-lg",rules:["date"],readonly:"Date"==D.value},{append:(0,o.w5)((()=>[(0,o.Wm)(Q,{name:"event",class:"cursor-pointer"},{default:(0,o.w5)((()=>[(0,o.Wm)(U,{ref:"qDateProxy",cover:"","transition-show":"scale","transition-hide":"scale"},{default:(0,o.w5)((()=>[(0,o.Wm)(w,{modelValue:(0,d.SU)(Z).pickup_date,"onUpdate:modelValue":l[9]||(l[9]=e=>(0,d.SU)(Z).pickup_date=e),options:k},{default:(0,o.w5)((()=>[(0,o._)("div",g,[(0,o.wy)((0,o.Wm)(r,{label:"Save",color:"primary",flat:""},null,512),[[H]])])])),_:1},8,["modelValue"])])),_:1},512)])),_:1})])),_:1},8,["label","modelValue","readonly"]))],2)])]),_,(0,o._)("div",b,[(0,o._)("div",y,[(0,o._)("div",{class:(0,t.C_)((0,d.SU)(f).screen.lt.md?"":"q-pr-lg q-mr-lg")},[(0,o.Wm)(i,{class:"q-mb-lg","bg-color":"indigo-1",filled:"",modelValue:(0,d.SU)(Z).address,"onUpdate:modelValue":l[11]||(l[11]=e=>(0,d.SU)(Z).address=e),label:"Address"},null,8,["modelValue"])],2)]),(0,o._)("div",v,[(0,o._)("div",{class:(0,t.C_)((0,d.SU)(f).screen.lt.md||(0,d.SU)(f).screen.lt.sm?"":"q-pl-lg q-ml-lg ")},[(0,o.Wm)(i,{class:"q-mb-sm","bg-color":"indigo-1",filled:"",modelValue:(0,d.SU)(Z).phone_number,"onUpdate:modelValue":l[12]||(l[12]=e=>(0,d.SU)(Z).phone_number=e),onKeypress:q,label:"Contact Number"},null,8,["modelValue"])],2)])]),(0,o.Wm)(x,{align:"right"},{default:(0,o.w5)((()=>[(0,o.Wm)(r,{align:"left",onClick:l[13]||(l[13]=l=>e.$router.back()),class:"btn-fixed-width",flat:"",color:"primary",label:"Cancel"}),(0,o.Wm)(r,{loading:S.value,type:"submit",unelevated:"",style:{background:"#4b88fe",color:"white"},label:"Book Now"},{loading:(0,o.w5)((()=>[(0,o.Wm)(F)])),_:1},8,["loading"])])),_:1})])),_:1})])),_:1})])),_:1})}}};var q=a(4379),w=a(151),S=a(5269),U=a(3314),k=a(6375),V=a(4842),h=a(4554),W=a(3944),D=a(6915),Z=a(2165),Q=a(9367),C=a(8719),F=a(677),P=a(7518),j=a.n(P);const x=f,I=x;j()(f,"components",{QPage:q.Z,QCard:w.Z,QForm:S.Z,QSelect:U.Z,QBtnGroup:k.Z,QInput:V.Z,QIcon:h.Z,QPopupProxy:W.Z,QDate:D.Z,QBtn:Z.Z,QCardActions:Q.Z,QSpinnerFacebook:C.Z}),j()(f,"directives",{ClosePopup:F.Z})}}]);