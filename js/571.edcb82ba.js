"use strict";(self["webpackChunkmonstorm_fe"]=self["webpackChunkmonstorm_fe"]||[]).push([[571],{4571:(e,l,a)=>{a.r(l),a.d(l,{default:()=>X});a(71);var t=a(3673),o=a(2323),n=a(1959),s=a(2301),i=a(3774),u=a(8751),r=a(5616),d=a(2841),c=a(5162),p=a(2635),m=a(3617),w=a(9582),g=a(8272),b=a(7946),f=a(5225);const v=(0,t.Uk)("Filter by Date Range "),k=(0,t.Uk)(" List View "),_=(0,t.Uk)("Visible Columns"),y={class:"text-grey-8"},D={class:"text-grey-8"},W={setup(e){f.Z.addLocale(b);const l=new f.Z("en-US"),a=(0,n.iH)(!0),W=(0,n.iH)(!1),q=(0,n.iH)(!1),x=(0,n.iH)(["customer","product","quantity","type","pickup","delivery","actions"]),h=[{name:"customer",label:"Customer",align:"left",field:e=>e.booking.user.name,format:e=>`${e}`,sortable:!0,icon:"o_person"},{name:"product",label:"Product",align:"left",field:e=>e.product.product_name,format:e=>`${e}`,sortable:!0,icon:"o_local_drink"},{name:"quantity",align:"center",label:"Quantity",field:e=>e.booking.quantity+" item(s)",sortable:!0,icon:"money"},{name:"type",align:"center",field:e=>e.booking.booking_type,label:"Type",sortable:!0,icon:"lock_open"},{icon:"lock_open",name:"delivery",sortable:!0,align:"center",label:"Delivery Date",field:e=>"Today"},{name:"pickup",icon:"lock_open",align:"center",label:"Pickup Date",field:e=>e.booking.pickup_date?l.format(new Date(e.booking.pickup_date)-6e4):""},{name:"date",align:"center",label:"Issued Date",icon:"event",field:e=>U(e.created_at,"MMMM DD, YYYY")},{name:"actions",align:"right",label:"Manage Transaction",icon:"o_settings"}],Z=((0,w.tv)(),(0,n.iH)([1]),(0,n.iH)(!1),(0,n.iH)(null),(0,m.oR)()),{formatDate:U}=r.ZP,Y=(0,n.iH)(""),M=((0,n.qj)(JSON.parse(localStorage.getItem("user"))),(0,n.iH)(!0),(0,n.iH)(!0)),S=(0,t.f3)("getStatus"),Q=(0,t.f3)("pusher"),T=((0,t.f3)("emitter"),(0,n.iH)(!1)),V=((0,n.iH)([]),(0,n.iH)([{name:"All",status:10},{name:"Delivering",status:3},{name:"Pending",status:0},{name:"Ready to pick up",status:6},{name:"Processing",status:1},{name:"Not Approved",status:2},{name:"Done",status:5}])),j=(0,n.iH)(V.value[0]);Z.dispatch("getAllTransaction");const H=(0,t.Fl)((()=>10!==j.value.status||4==j.value.status||5==j.value.status?Z.getters.allTransaction.filter((e=>e.booking.status==j.value.status)):Z.getters.allTransaction)),z=((0,t.Fl)((()=>Z.getters.allTransaction)),(0,t.Fl)((()=>10!==j.value.status||4==j.value.status||5==j.value.status?Z.getters.allTransaction.filter((e=>e.booking.status==j.value.status)):Z.getters.allTransaction))),C=e=>{if(!e||!e.includes("/"))return e;const[l,a,t]=e.split("/");return new Date(`${a}/${t}/${l}`)},$=(0,n.iH)(null),P=(0,n.iH)(null),F=(0,t.Fl)((()=>{j.value.status;let e=C($.value),l=C(P.value);return z.value.filter((a=>{const t=new Date(a.created_at);return e&&l?e<=t&&t<=l:e&&!l?e<=t:!(!e&&l)||t<=l}))})),I=Q.subscribe("monstorm-notify-new-booking");I.bind("Admin",(function(e){Z.dispatch("getAllTransaction")})),(0,t.bv)((()=>{"complete"===document.readyState?M.value=!1:document.addEventListener("readystatechange",(function(){"complete"===document.readyState&&(M.value=!1)}))}));const L=(0,t.f3)("temitter"),A=async(e,l)=>{L.emit("viewTransaction",l)},R=(e,l,a)=>{let t=void 0!==l?l(e,a):e;return t=void 0===t||null===t?"":String(t),t=t.split('"').join('""'),`"${t}"`},B=()=>{const e=[h.map((e=>R(e.label)))].concat(H.value.map((e=>h.map((l=>R("function"===typeof l.field?l.field(e):e[void 0===l.field?l.name:l.field],l.format,e))).join(",")))).join("\r\n"),l=(0,d.Z)("transaction.csv",e,"text/csv");!0!==l&&$q.notify({message:"Browser denied file download...",color:"negative",icon:"warning"})};return(e,l)=>{const r=(0,t.up)("q-select"),d=(0,t.up)("q-toolbar-title"),m=(0,t.up)("q-tooltip"),w=(0,t.up)("q-btn"),b=(0,t.up)("q-card"),f=(0,t.up)("q-dialog"),Z=(0,t.up)("q-toolbar"),Q=(0,t.up)("q-page-sticky"),H=(0,t.up)("q-separator"),z=(0,t.up)("q-icon"),C=(0,t.up)("q-th"),I=(0,t.up)("q-input"),R=(0,t.up)("q-space"),E=(0,t.up)("q-item-label"),K=(0,t.up)("q-badge"),N=(0,t.up)("q-item-section"),G=(0,t.up)("q-td"),J=(0,t.up)("q-chip"),O=(0,t.up)("q-item"),X=(0,t.up)("q-list"),ee=(0,t.up)("q-table"),le=(0,t.up)("q-page-scroller"),ae=(0,t.up)("q-page"),te=(0,t.Q2)("ripple");return(0,t.wg)(),(0,t.j4)(ae,null,{default:(0,t.w5)((()=>[(0,t.Wm)(c.Z),(0,t.Wm)(g.Z),(0,t.Wm)(Q,{expand:"",position:"top",class:"bg-white",style:(0,o.j5)(e.$q.screen.xs?"z-index:1;height:65px; margin-left:15px;margin-right:15px;border-bottom:1px solid #DDDDDD;padding-bottom:15px":"z-index:1;height:65px; margin-left:40px;margin-right:40px;border-bottom:1px solid #DDDDDD;padding-bottom:15px")},{default:(0,t.w5)((()=>[(0,t.Wm)(Z,{class:"text-grey-8 bg-white",style:{"margin-top":"5px"}},{default:(0,t.w5)((()=>[(0,t.Wm)(d,null,{default:(0,t.w5)((()=>[(0,t.Wm)(r,{modelValue:j.value,"onUpdate:modelValue":l[0]||(l[0]=e=>j.value=e),filled:"","options-dense":"",dense:"","bg-color":"indigo-1","option-label":e=>e.name,options:V.value,style:{width:"200px"},label:"Filter by Status"},null,8,["modelValue","option-label","options"])])),_:1}),(0,t.Wm)(w,{flat:"",round:"",icon:"date_range",class:"lt-sm",onClick:l[1]||(l[1]=e=>W.value=!0)},{default:(0,t.w5)((()=>[(0,t.Wm)(m,null,{default:(0,t.w5)((()=>[v])),_:1})])),_:1}),(0,t.Wm)(s.Z,{class:"gt-xs",startDate:$.value,"onUpdate:startDate":l[2]||(l[2]=e=>$.value=e),endDate:P.value,"onUpdate:endDate":l[3]||(l[3]=e=>P.value=e)},null,8,["startDate","endDate"]),(0,t.Wm)(f,{modelValue:W.value,"onUpdate:modelValue":l[6]||(l[6]=e=>W.value=e),position:"right"},{default:(0,t.w5)((()=>[(0,t.Wm)(b,{style:{width:"220px"}},{default:(0,t.w5)((()=>[(0,t.Wm)(s.Z,{startDate:$.value,"onUpdate:startDate":l[4]||(l[4]=e=>$.value=e),endDate:P.value,"onUpdate:endDate":l[5]||(l[5]=e=>P.value=e)},null,8,["startDate","endDate"])])),_:1})])),_:1},8,["modelValue"]),a.value?((0,t.wg)(),(0,t.j4)(w,{key:0,onClick:l[7]||(l[7]=e=>a.value=!1),flat:"",round:"",dense:"",icon:"o_view_list"},{default:(0,t.w5)((()=>[(0,t.Wm)(m,null,{default:(0,t.w5)((()=>[k])),_:1})])),_:1})):((0,t.wg)(),(0,t.j4)(w,{key:1,onClick:l[8]||(l[8]=e=>a.value=!0),flat:"",round:"",dense:"",icon:"o_table_view"},{default:(0,t.w5)((()=>[(0,t.Wm)(m,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(e.$q.screen.sm||e.$q.screen.xs?"Grid View ":"Table View "),1)])),_:1})])),_:1}))])),_:1})])),_:1},8,["style"]),((0,t.wg)(),(0,t.iD)(t.HY,null,(0,t.Ko)(5,(e=>(0,t.Wm)(H,{spaced:"",class:"bg-transparent",key:e}))),64)),M.value?((0,t.wg)(),(0,t.j4)((0,n.SU)(p.Z),{key:0})):(0,t.kq)("",!0),a.value?(0,t.kq)("",!0):((0,t.wg)(),(0,t.j4)(i.Z,{key:1,data:(0,n.SU)(F),class:"q-mt-lg"},null,8,["data"])),!M.value&&a.value?((0,t.wg)(),(0,t.j4)(ee,{key:2,flat:"",class:"q-pb-lg",grid:e.$q.screen.sm||e.$q.screen.xs,"virtual-scroll":"",style:{height:"100%",background:"white",padding:"0px"},title:"Transactions",rows:(0,n.SU)(F),columns:h,"row-key":"id",filter:Y.value,onRowClick:A,loading:T.value,"visible-columns":x.value},{"header-cell":(0,t.w5)((e=>[(0,t.Wm)(C,{props:e},{default:(0,t.w5)((()=>[(0,t.Wm)(z,{name:e.col.icon,size:"1.5em"},null,8,["name"]),(0,t.Uk)(" "+(0,o.zw)(e.col.label),1)])),_:2},1032,["props"])])),top:(0,t.w5)((a=>[(0,t.Wm)(I,{borderless:"",dense:"",debounce:"300",modelValue:Y.value,"onUpdate:modelValue":l[9]||(l[9]=e=>Y.value=e),placeholder:"Search"},{append:(0,t.w5)((()=>[(0,t.Wm)(z,{name:"search"})])),_:1},8,["modelValue"]),(0,t.Wm)(R),(0,t.Wm)(w,{flat:"",round:"",icon:"o_view_column",class:"lt-sm text-grey-9",onClick:l[10]||(l[10]=e=>q.value=!0)},{default:(0,t.w5)((()=>[(0,t.Wm)(m,null,{default:(0,t.w5)((()=>[_])),_:1})])),_:1}),(0,t.Wm)(f,{modelValue:q.value,"onUpdate:modelValue":l[12]||(l[12]=e=>q.value=e),position:"right"},{default:(0,t.w5)((()=>[(0,t.Wm)(b,{style:{width:"220px"}},{default:(0,t.w5)((()=>[(0,t.Wm)(r,{modelValue:x.value,"onUpdate:modelValue":l[11]||(l[11]=e=>x.value=e),multiple:"",filled:"",dense:"","options-dense":"","display-value":e.$q.lang.table.columns,"emit-value":"","map-options":"",options:h,"option-value":"name","options-cover":"",style:{"min-width":"150px"},"bg-color":"indigo-1"},null,8,["modelValue","display-value"])])),_:1})])),_:1},8,["modelValue"]),(0,t.Wm)(r,{class:"gt-xs",modelValue:x.value,"onUpdate:modelValue":l[13]||(l[13]=e=>x.value=e),multiple:"",borderless:"",dense:"","options-dense":"","display-value":e.$q.lang.table.columns,"emit-value":"","map-options":"",options:h,"option-value":"name","options-cover":"",style:{}},null,8,["modelValue","display-value"]),(0,t.Wm)(w,{class:"q-ml-xs",color:"primary","icon-right":"archive",label:e.$q.screen.xs?"":"Export","no-caps":"",size:"sm",onClick:B},null,8,["label"]),e.$q.screen.xs?(0,t.kq)("",!0):((0,t.wg)(),(0,t.j4)(w,{key:0,flat:"",round:"",dense:"",icon:a.inFullscreen?"fullscreen_exit":"fullscreen",onClick:a.toggleFullscreen,class:"q-ml-md"},null,8,["icon","onClick"]))])),"body-cell-product":(0,t.w5)((e=>[(0,t.Wm)(G,{props:e},{default:(0,t.w5)((()=>[(0,t.Wm)(N,null,{default:(0,t.w5)((()=>[(0,t.Wm)(E,{class:"text-dark"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(e.row.product.product_name),1)])),_:2},1024),(0,t.Wm)(E,{"text-caption":""},{default:(0,t.w5)((()=>[(0,t.Wm)(K,{color:(0,n.SU)(S)(e.row.booking.status,"color"),label:(0,n.SU)(S)(e.row.booking.status,"label")},null,8,["color","label"])])),_:2},1024)])),_:2},1024)])),_:2},1032,["props"])])),"body-cell-type":(0,t.w5)((e=>[(0,t.Wm)(G,{props:e},{default:(0,t.w5)((()=>[(0,t.Wm)(E,{class:"text-dark"},{default:(0,t.w5)((()=>["Free Delivery"===e.row.booking.booking_type?((0,t.wg)(),(0,t.j4)(z,{key:0,name:"directions_car",size:"20px"})):((0,t.wg)(),(0,t.j4)(z,{key:1,name:"hail",size:"20px"})),(0,t.Uk)((0,o.zw)(e.row.booking.booking_type),1)])),_:2},1024)])),_:2},1032,["props"])])),"body-cell-delivery":(0,t.w5)((e=>[(0,t.Wm)(G,{props:e},{default:(0,t.w5)((()=>[(0,t.Wm)(N,null,{default:(0,t.w5)((()=>[(0,t.Wm)(E,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(e.row.booking.delivery_date?(0,n.SU)(U)(e.row.booking.delivery_date,"MMMM DD, YYYY"):""),1)])),_:2},1024),(0,t.Wm)(E,{caption:""},{default:(0,t.w5)((()=>[(0,t._)("div",y,(0,o.zw)((0,n.SU)(U)(e.row.booking.delivery_date,"MMMM DD, YYYY")==(0,n.SU)(U)(new Date,"MMMM DD, YYYY")?"Today":""),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["props"])])),"body-cell-pickup":(0,t.w5)((e=>[(0,t.Wm)(G,{props:e},{default:(0,t.w5)((()=>[(0,t.Wm)(N,null,{default:(0,t.w5)((()=>[(0,t.Wm)(E,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(e.row.booking.pickup_date?(0,n.SU)(U)(e.row.booking.pickup_date,"MMMM DD, YYYY"):""),1)])),_:2},1024),(0,t.Wm)(E,{caption:""},{default:(0,t.w5)((()=>[(0,t._)("div",D,(0,o.zw)((0,n.SU)(U)(e.row.booking.pickup_date,"MMMM DD, YYYY")==(0,n.SU)(U)(new Date,"MMMM DD, YYYY")?"Today":""),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["props"])])),"body-cell-actions":(0,t.w5)((e=>[(0,t.Wm)(G,{props:e},{default:(0,t.w5)((()=>[(0,t.Wm)(u.Z,{data:e.row},null,8,["data"])])),_:2},1032,["props"])])),item:(0,t.w5)((e=>[(0,t._)("div",{class:"q-pa-xs col-xs-12 col-sm-6 col-md-4 col-lg-3 grid-style-transition",style:(0,o.j5)(e.selected?"transform: scale(0.95);":"")},[(0,t.wy)(((0,t.wg)(),(0,t.j4)(b,{clickable:"",style:{cursor:"pointer"},class:(0,o.C_)(e.selected?"bg-grey-2":""),onClick:l=>(0,n.SU)(L).emit("viewTransaction",e.row)},{default:(0,t.w5)((()=>[(0,t.Wm)(X,{dense:""},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e.cols,(l=>((0,t.wg)(),(0,t.j4)(O,{key:l.name},{default:(0,t.w5)((()=>[(0,t.Wm)(N,null,{default:(0,t.w5)((()=>[(0,t.Wm)(E,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(l.label),1)])),_:2},1024)])),_:2},1024),(0,t.Wm)(N,{side:""},{default:(0,t.w5)((()=>["Product"===l.name?((0,t.wg)(),(0,t.j4)(J,{key:0,color:e.row.carbs>24?"green":"red","text-color":"white",dense:"",size:"sm",class:"text-weight-bolder",square:""},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(l.value),1)])),_:2},1032,["color"])):"actions"===l.name?((0,t.wg)(),(0,t.j4)(G,{key:1},{default:(0,t.w5)((()=>[(0,t.Wm)(u.Z,{data:e.row},null,8,["data"])])),_:2},1024)):((0,t.wg)(),(0,t.j4)(E,{key:2,class:(0,o.C_)(l.classes?l.classes:"")},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(l.value),1)])),_:2},1032,["class"])),"product"===l.name?((0,t.wg)(),(0,t.j4)(E,{key:3,"text-caption":""},{default:(0,t.w5)((()=>[(0,t.Wm)(K,{color:(0,n.SU)(S)(e.row.booking.status,"color"),label:(0,n.SU)(S)(e.row.booking.status,"label")},null,8,["color","label"])])),_:2},1024)):(0,t.kq)("",!0)])),_:2},1024)])),_:2},1024)))),128))])),_:2},1024)])),_:2},1032,["class","onClick"])),[[te]])],4)])),_:1},8,["grid","rows","filter","loading","visible-columns"])):(0,t.kq)("",!0),(0,t.Wm)(le,{position:"bottom-right","scroll-offset":150,offset:[18,80]},{default:(0,t.w5)((()=>[(0,t.Wm)(w,{fab:"",icon:"keyboard_arrow_up",class:"shadow-5",color:"blue"})])),_:1}),(0,t.Wm)(le,{reverse:"",position:"bottom-right","scroll-offset":25,offset:[18,18]},{default:(0,t.w5)((()=>[(0,t.Wm)(w,{fab:"",icon:"keyboard_arrow_down",class:"shadow-5",color:"blue"})])),_:1})])),_:1})}}};var q=a(4379),x=a(4264),h=a(9570),Z=a(2165),U=a(3747),Y=a(3314),M=a(8870),S=a(6778),Q=a(151),T=a(1598),V=a(3812),j=a(5869),H=a(1278),z=a(2414),C=a(4554),$=a(4842),P=a(2025),F=a(3884),I=a(2035),L=a(2350),A=a(9721),R=a(7011),B=a(3414),E=a(7030),K=a(4710),N=a(6489),G=a(7518),J=a.n(G);const O=W,X=O;J()(W,"components",{QPage:q.Z,QPageSticky:x.Z,QToolbar:h.Z,QBtn:Z.Z,QToolbarTitle:U.Z,QSelect:Y.Z,QTooltip:M.Z,QDialog:S.Z,QCard:Q.Z,QLinearProgress:T.Z,QHeader:V.Z,QSeparator:j.Z,QTable:H.Z,QTh:z.Z,QIcon:C.Z,QInput:$.Z,QSpace:P.Z,QTd:F.Z,QItemSection:I.Z,QItemLabel:L.Z,QBadge:A.Z,QList:R.Z,QItem:B.Z,QChip:E.Z,QPageScroller:K.Z}),J()(W,"directives",{Ripple:N.Z})}}]);