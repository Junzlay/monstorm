"use strict";(self["webpackChunkmonstorm_fe"]=self["webpackChunkmonstorm_fe"]||[]).push([[233],{233:(e,a,l)=>{l.r(a),l.d(a,{default:()=>R});l(5363);var t=l(3673),o=l(1959),n=l(2323),i=(l(5720),l(7410),l(8336)),s=(l(3062),l(7452),l(8825)),u=l(9582),r=(l(4434),l(3617));const d={id:"q-app"},m={class:"column q-pa-lg"},c={class:"row q-pa-lg"},p=(0,t._)("h4",{class:"text-h5 text-white q-my-md"}," Create Monstorm Account ",-1),v={class:"q-my-none text-white"},f=(0,t.Uk)(" Already have an account? "),w=(0,t._)("div",{class:"text-subtitle1 text-grey-9"},"Add Personal Information",-1),b=(0,t._)("div",{id:"recaptcha-container","data-callback":"recaptchaCallback",style:{margin:"0 auto",display:"table"},"data-theme":"light"},null,-1),h={class:"text-subtitle1 text-grey-9"},g={key:0,class:"q-pt-lg text-center",caption:""},y=(0,t._)("div",{class:"text-grey-9 text-subtitle1"},"Create your password",-1),_={setup(e){const a=(0,s.Z)(),l=(0,u.tv)(),_=(0,r.oR)(),W=(0,o.iH)(!0),V=(0,o.iH)(!0),q=(0,o.iH)(!1),S=(0,o.iH)(1),k=(0,o.iH)(null),U=(0,o.qj)({name:"",phone_number:"",address:"",password:"",password_confirmation:"",user_type:"customer"}),C=(0,o.iH)(""),Z=(0,o.iH)(""),x=e=>{const a=/^(09|\+639)\d{9}$/;return a.test(e)||"Enter a Valid Mobile Number"},Q=(0,o.iH)(!1),H={apiKey:"AIzaSyAz5jvLmvxn9goE3vGO_4pQ0B4Gt2o1-aA",authDomain:"monstorm-app.firebaseapp.com",projectId:"monstorm-app",storageBucket:"monstorm-app.appspot.com",messagingSenderId:"168503245103",appId:"1:168503245103:web:5e25816af07b88cea2c9da",measurementId:"G-ZP12D60CM8"};i.Z.initializeApp(H);const I=()=>{setTimeout((()=>{window.recaptchaVerifier=new i.Z.auth.RecaptchaVerifier("recaptcha-container",{size:"invisible",callback:function(e){Q.value=!0},"expired-callback":function(){Q.value=!1,console.log("response")}}),recaptchaVerifier.render(),Z.value=window.recaptchaVerifier}),1e3)};(0,o.iH)("");I();const A=(0,o.iH)(!0),P=(0,o.iH)(5),N=()=>{P.value>0?setTimeout((()=>{P.value--,N()}),1e3):A.value=!1};N();const F=()=>{let e="+63",l=e+U.phone_number.substring(1),t=Z.value;i.Z.auth().signInWithPhoneNumber(l,t).then((function(e){window.confirmationResult=e,q.value=!1,S.value=2})).catch((function(e){q.value=!1,a.notify({type:"primary",message:"Error! Verification Not Sent"})}))},R=()=>{q.value=!0;let e=C.value;window.confirmationResult.confirm(e).then((function(e){q.value=!1,a.notify({type:"primary",message:"Verified Successfully",caption:"Last step, setting up your password"}),S.value=3})).catch((function(e){q.value=!1,a.notify({type:"primary",message:"Incorrect verification code"})}))},z=async()=>{q.value=!0;const e=await _.dispatch("auth/checkNumber",U.phone_number);1===e.count?(q.value=!1,a.notify({type:"negative",message:"Phone Number is used already"})):F()},D=async()=>{q.value=!0;const e=await _.dispatch("auth/doRegister",U);201==e.status?(a.notify({type:"positive",message:e.message}),l.push("/login")):(q.value=!1,a.notify({type:"negative",message:e.message}))};return(e,a)=>{const i=(0,t.up)("q-card-section"),s=(0,t.up)("q-icon"),u=(0,t.up)("q-input"),r=(0,t.up)("q-spinner-facebook"),_=(0,t.up)("q-btn"),Z=(0,t.up)("q-stepper-navigation"),Q=(0,t.up)("q-card-actions"),H=(0,t.up)("q-form"),I=(0,t.up)("q-step"),N=(0,t.up)("q-stepper"),F=(0,t.up)("q-card"),L=(0,t.up)("q-page"),j=(0,t.up)("q-layout");return(0,t.wg)(),(0,t.iD)("div",d,[(0,t.Wm)(j,{view:"lHh Lpr fff"},{default:(0,t.w5)((()=>[(0,t.Wm)(L,{class:"window-height window-width row justify-center items-center",style:{background:"white"}},{default:(0,t.w5)((()=>[(0,t._)("div",m,[(0,t._)("div",c,[(0,t.Wm)(F,{rounded:"",class:"shadow-10",style:{width:"400px",height:"auto"}},{default:(0,t.w5)((()=>[(0,t.Wm)(i,{class:"bg-blue-7"},{default:(0,t.w5)((()=>[p,(0,t._)("p",v,[f,(0,t._)("span",{style:{color:"#fff",cursor:"pointer","text-decoration":"underline"},onClick:a[0]||(a[0]=e=>(0,o.SU)(l).push("/"))},"Log in")])])),_:1}),(0,t.Wm)(N,{modelValue:S.value,"onUpdate:modelValue":a[10]||(a[10]=e=>S.value=e),"header-nav":"",ref_key:"stepper",ref:k,color:"primary",animated:""},{default:(0,t.w5)((()=>[(0,t.Wm)(I,{name:1,title:"",icon:"manage_accounts",done:S.value>1,"header-nav":S.value>1},{default:(0,t.w5)((()=>[(0,t.Wm)(H,{class:"q-px-sm",onSubmit:z},{default:(0,t.w5)((()=>[w,(0,t.Wm)(u,{label:"Full Name",modelValue:(0,o.SU)(U).name,"onUpdate:modelValue":a[1]||(a[1]=e=>(0,o.SU)(U).name=e),rules:[e=>!!e||"Field is required"]},{append:(0,t.w5)((()=>[(0,t.Wm)(s,{name:"o_person"})])),_:1},8,["modelValue","rules"]),(0,t.Wm)(u,{debounce:"500",modelValue:(0,o.SU)(U).phone_number,"onUpdate:modelValue":a[2]||(a[2]=e=>(0,o.SU)(U).phone_number=e),label:"Mobile Number",rules:[e=>!!e||"Field is required",x]},{append:(0,t.w5)((()=>[(0,t.Wm)(s,{name:"tag"})])),_:1},8,["modelValue","rules"]),(0,t.Wm)(u,{modelValue:(0,o.SU)(U).address,"onUpdate:modelValue":a[3]||(a[3]=e=>(0,o.SU)(U).address=e),label:"Address",rules:[e=>!!e||"Field is required"]},{append:(0,t.w5)((()=>[(0,t.Wm)(s,{name:"o_room"})])),_:1},8,["modelValue","rules"]),b,(0,t.Wm)(Q,{align:"right"},{default:(0,t.w5)((()=>[(0,t.Wm)(Z,null,{default:(0,t.w5)((()=>[(0,t.Wm)(_,{type:"submit",loading:q.value,color:"primary",unelevated:"",label:"Continue"},{loading:(0,t.w5)((()=>[(0,t.Wm)(r)])),_:1},8,["loading"])])),_:1})])),_:1})])),_:1})])),_:1},8,["done","header-nav"]),(0,t.Wm)(I,{name:2,title:"",icon:"verified_user",done:S.value>2,"header-nav":S.value>2},{default:(0,t.w5)((()=>[(0,t.Wm)(H,{onSubmit:R},{default:(0,t.w5)((()=>[(0,t._)("div",h,"Verification Code was sent to your mobile number "+(0,n.zw)((0,o.SU)(U).phone_number.replace((0,o.SU)(U).phone_number.substring(4,8),"****")),1),(0,t.Wm)(u,{modelValue:C.value,"onUpdate:modelValue":a[4]||(a[4]=e=>C.value=e),debounce:"500",label:"Verification Code",mask:"# # # # # #","unmasked-value":"",rules:[e=>!!e||"Code is required",e=>6===e.length||"Code must contains 6 digits"]},null,8,["modelValue","rules"]),(0,t._)("div",null,[(0,t.Wm)(_,{disabled:A.value,flat:"",color:"primary",label:"Resend Code",class:"q-mt-lg"},null,8,["disabled"]),(0,t.Wm)(Z,{class:"float-right"},{default:(0,t.w5)((()=>[(0,t.Wm)(_,{flat:"",onClick:a[5]||(a[5]=e=>S.value=1),color:"primary",label:"Back",class:"q-ml-sm"}),(0,t.Wm)(_,{type:"submit",loading:q.value,color:"primary",unelevated:"",label:"Verify"},{loading:(0,t.w5)((()=>[(0,t.Wm)(r)])),_:1},8,["loading"])])),_:1})]),P.value>0?((0,t.wg)(),(0,t.iD)("div",g," Resend Code will be available at "+(0,n.zw)(P.value)+" seconds ",1)):(0,t.kq)("",!0)])),_:1})])),_:1},8,["done","header-nav"]),(0,t.Wm)(I,{title:"",name:3,icon:"lock","header-nav":S.value>3},{default:(0,t.w5)((()=>[y,(0,t.Wm)(H,{onSubmit:D},{default:(0,t.w5)((()=>[(0,t.Wm)(u,{debounce:"500",modelValue:(0,o.SU)(U).password,"onUpdate:modelValue":a[7]||(a[7]=e=>(0,o.SU)(U).password=e),label:"Password",type:W.value?"password":"text",rules:[e=>e.length>7||"Password shoud have at least 8 character"]},{append:(0,t.w5)((()=>[(0,t.Wm)(s,{name:W.value?"visibility_off":"visibility",class:"cursor-pointer",onClick:a[6]||(a[6]=e=>W.value=!W.value)},null,8,["name"])])),_:1},8,["modelValue","type","rules"]),(0,t.Wm)(u,{debounce:"500",modelValue:(0,o.SU)(U).password_confirmation,"onUpdate:modelValue":a[9]||(a[9]=e=>(0,o.SU)(U).password_confirmation=e),label:"Confirm Password",type:V.value?"password":"text",rules:[e=>e==(0,o.SU)(U).password||"Password Does not match"]},{append:(0,t.w5)((()=>[(0,t.Wm)(s,{name:V.value?"visibility_off":"visibility",class:"cursor-pointer",onClick:a[8]||(a[8]=e=>V.value=!V.value)},null,8,["name"])])),_:1},8,["modelValue","type","rules"]),(0,t.Wm)(Q,{align:"right"},{default:(0,t.w5)((()=>[(0,t.Wm)(Z,null,{default:(0,t.w5)((()=>[(0,t.Wm)(_,{type:"submit",loading:q.value,color:"primary",unelevated:"",label:"Finish"},{loading:(0,t.w5)((()=>[(0,t.Wm)(r)])),_:1},8,["loading"])])),_:1})])),_:1})])),_:1})])),_:1},8,["header-nav"])])),_:1},8,["modelValue"]),(0,t.Wm)(i)])),_:1})])])])),_:1})])),_:1})])}}};var W=l(3066),V=l(4379),q=l(151),S=l(5589),k=l(3518),U=l(6552),C=l(5269),Z=l(4842),x=l(4554),Q=l(9367),H=l(6877),I=l(2165),A=l(8719),P=l(7518),N=l.n(P);const F=_,R=F;N()(_,"components",{QLayout:W.Z,QPage:V.Z,QCard:q.Z,QCardSection:S.Z,QStepper:k.Z,QStep:U.Z,QForm:C.Z,QInput:Z.Z,QIcon:x.Z,QCardActions:Q.Z,QStepperNavigation:H.Z,QBtn:I.Z,QSpinnerFacebook:A.Z})}}]);