"use strict";(self["webpackChunkmonstorm_fe"]=self["webpackChunkmonstorm_fe"]||[]).push([[744],{9744:(e,a,l)=>{l.r(a),l.d(a,{default:()=>K});var t=l(3673),s=l(1959),o=(l(71),l(7965),l(6016),l(2100),l(8880)),u=l(3617),n=l(8825);const r={class:"row q-col-gutter-x-lg flex-direction reverse border q-mt-sm"},d={class:"col-xs-12 col-sm-6 col-md-6"},i=["src"],m=(0,t.Uk)("Upload"),p=(0,t._)("div",{class:"text-weight-bolder text-grey-9"},"Profile Picture",-1),c={class:"col-xs-12 col-sm-6 col-md-6 q-mb-lg"},g={class:"q-mt-sm"},w={setup(e){const a=(0,n.Z)(),l=(0,u.oR)(),w=(0,t.f3)("emitter"),f=e=>{const a=/^(09|\+639)\d{9}$/;return a.test(e)||"Invalid Phone Number"},h=(0,s.iH)(),_=(0,s.iH)(!1),y=(0,s.qj)({}),b=(0,s.qj)(JSON.parse(localStorage.getItem("user"))),v=(0,t.f3)("baseURL"),q=(0,s.qj)({id:b.id,name:b.name,phone_number:b.phone_number,address:b.address}),U=(0,s.iH)(!1),W=(0,s.iH)(),S=e=>{y.value=e.target.files[0],U.value=!0,W.value=URL.createObjectURL(y.value)},V=(0,s.iH)(v+"/getImage/"+b.id+"?"+(new Date).getTime()),Z=async()=>{let e=new FormData;e.append("user_id",b.id),e.append("new_image",y.value),_.value=!0;const t=await l.dispatch("updateImage",[e,b.id]);t.success&&setTimeout((function(){V.value=v+"/getImage/"+b.id+"?"+(new Date).getTime(),_.value=!1,a.notify({message:"Update user profile done",color:"positive"}),w.emit("userUpdate",b)}),1e3)};async function x(){document.getElementById("upload_file").click()}(0,t.bv)((()=>{}));const P=async()=>{await l.dispatch("updateProfile",q).then((e=>{200===e.status?(localStorage.setItem("user",JSON.stringify(e.data)),a.notify({message:"Update Successfully",color:"positive"}),w.emit("userUpdate",e.data)):201==e.status&&a.notify({message:e.data,color:"warning"})})).catch((e=>{console.log(e)}))};return(e,a)=>{const l=(0,t.up)("q-spinner-tail"),u=(0,t.up)("q-tooltip"),n=(0,t.up)("q-btn"),w=(0,t.up)("q-badge"),y=(0,t.up)("q-avatar"),b=(0,t.up)("q-card-section"),v=(0,t.up)("q-card"),Q=(0,t.up)("q-input"),k=(0,t.up)("q-form"),j=(0,t.up)("q-img"),I=(0,t.up)("q-separator"),C=(0,t.up)("q-card-actions"),T=(0,t.up)("q-dialog"),z=(0,t.Q2)("close-popup");return(0,t.wg)(),(0,t.iD)("div",r,[(0,t._)("div",d,[(0,t.Wm)(v,{class:"my-card justify-center text-center q-mt-xs shadow-0"},{default:(0,t.w5)((()=>[(0,t.Wm)(b,null,{default:(0,t.w5)((()=>[(0,t.Wm)(y,{size:"150px",class:"shadow-2"},{default:(0,t.w5)((()=>[_.value?((0,t.wg)(),(0,t.j4)(l,{key:0,style:{position:"absolute"},color:"primary",size:"2em"})):(0,t.kq)("",!0),(0,t.Wm)(o.uT,{appear:"","enter-active-class":"animated fadeIn slower","leave-active-class":"animated fadeOut slower"},{default:(0,t.w5)((()=>[(0,t._)("img",{src:V.value},null,8,i)])),_:1}),(0,t.Wm)(w,{class:"absolute-bottom-right",style:{background:"#00000000","margin-top":"100px"},floating:""},{default:(0,t.w5)((()=>[(0,t.Wm)(n,{onClick:x,size:"sm",round:"",icon:"drive_file_rename_outline",color:"secondary"},{default:(0,t.w5)((()=>[(0,t._)("input",{type:"file",accept:"image,.x-png,.gif,.jpeg,.webp,.png,.jpg",style:{width:"0px",height:"0px"},ref_key:"imageRef",ref:h,onChange:S,id:"upload_file"},null,544),(0,t.Wm)(u,null,{default:(0,t.w5)((()=>[m])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),p])),_:1})]),(0,t._)("div",c,[(0,t.Wm)(k,{onSubmit:P,class:"q-gutter-md q-mt-lg"},{default:(0,t.w5)((()=>[(0,t.Wm)(Q,{modelValue:(0,s.SU)(q).name,"onUpdate:modelValue":a[0]||(a[0]=e=>(0,s.SU)(q).name=e),outlined:"",label:"Full Name",hint:"Name and surname","lazy-rules":"",rules:[e=>e&&e.length>0||"Please type something"]},null,8,["modelValue","rules"]),(0,t.Wm)(Q,{modelValue:(0,s.SU)(q).phone_number,"onUpdate:modelValue":a[1]||(a[1]=e=>(0,s.SU)(q).phone_number=e),label:"Phone Number",outlined:"",hint:"Start with +63 or 09","lazy-rules":"",rules:[e=>e&&e.length>0||"Please type something",f]},null,8,["modelValue","rules"]),(0,t.Wm)(Q,{modelValue:(0,s.SU)(q).address,"onUpdate:modelValue":a[2]||(a[2]=e=>(0,s.SU)(q).address=e),label:"Address",outlined:"","lazy-rules":"",rules:[e=>e&&e.length>0||"Please type something"]},null,8,["modelValue","rules"]),(0,t._)("div",g,[(0,t.Wm)(n,{label:"Update",type:"submit",unelevated:"",style:{background:"#4b88fe",color:"white"}})])])),_:1}),(0,t.Wm)(T,{modelValue:U.value,"onUpdate:modelValue":a[3]||(a[3]=e=>U.value=e)},{default:(0,t.w5)((()=>[(0,t.Wm)(v,{class:"card",style:{width:"300px"}},{default:(0,t.w5)((()=>[(0,t.Wm)(j,{src:W.value,style:{width:"300px",height:"250px"}},null,8,["src"]),(0,t.Wm)(I),(0,t.Wm)(C,{align:"center",class:"q-pa-md"},{default:(0,t.w5)((()=>[(0,t.wy)((0,t.Wm)(n,{color:"primary",class:"full-width",size:"md",onClick:Z,label:"Set new profile picture"},null,512),[[z]])])),_:1})])),_:1})])),_:1},8,["modelValue"])])])}}};var f=l(151),h=l(5589),_=l(5096),y=l(682),b=l(9721),v=l(2165),q=l(8870),U=l(5269),W=l(4842),S=l(6778),V=l(4027),Z=l(5869),x=l(9367),P=l(677),Q=l(7518),k=l.n(Q);const j=w,I=j;k()(w,"components",{QCard:f.Z,QCardSection:h.Z,QAvatar:_.Z,QSpinnerTail:y.Z,QBadge:b.Z,QBtn:v.Z,QTooltip:q.Z,QForm:U.Z,QInput:W.Z,QDialog:S.Z,QImg:V.Z,QSeparator:Z.Z,QCardActions:x.Z}),k()(w,"directives",{ClosePopup:P.Z});var C=l(9582);const T={class:"q-mt-sm"},z={setup(e){const a=(0,n.Z)(),l=(0,C.tv)(),o=(0,u.oR)(),r=((0,s.iH)(null),(0,s.qj)(JSON.parse(localStorage.getItem("user")))),d=(0,s.qj)({user_id:r.id,old_password:null,new_password:null,confirm_password:null}),i=async()=>{await o.dispatch("auth/changePass",d).then((e=>{201===e.status?(a.notify({message:e.message,color:"positive"}),o.dispatch("auth/logOut")&&setTimeout((function(){l.push("/login")}),1e3)):a.notify({message:e.message,color:"negative"})})).catch((e=>{console.log(e)}))};return(e,a)=>{const l=(0,t.up)("q-input"),o=(0,t.up)("q-btn"),u=(0,t.up)("q-form");return(0,t.wg)(),(0,t.j4)(u,{onSubmit:i,class:"q-gutter-md q-mt-lg"},{default:(0,t.w5)((()=>[(0,t.Wm)(l,{modelValue:(0,s.SU)(d).old_password,"onUpdate:modelValue":a[0]||(a[0]=e=>(0,s.SU)(d).old_password=e),outlined:"",type:"password",label:"Old Password",rules:[e=>e&&e.length>0||"Please type something"]},null,8,["modelValue","rules"]),(0,t.Wm)(l,{modelValue:(0,s.SU)(d).new_password,"onUpdate:modelValue":a[1]||(a[1]=e=>(0,s.SU)(d).new_password=e),label:"New Password",outlined:"",type:"password","lazy-rules":"",rules:[e=>e&&e.length>0||"Please type something",e=>e&&e.length>7||"Password should be atleast 8 characters"]},null,8,["modelValue","rules"]),(0,t.Wm)(l,{modelValue:(0,s.SU)(d).confirm_password,"onUpdate:modelValue":a[2]||(a[2]=e=>(0,s.SU)(d).confirm_password=e),label:"Confirm Password",outlined:"",type:"password","lazy-rules":"",rules:[e=>e&&e.length>0||"Please type something",e=>e==(0,s.SU)(d).new_password||"Password Does not match"]},null,8,["modelValue","rules"]),(0,t._)("div",T,[(0,t.Wm)(o,{label:"Update",type:"submit",color:"primary"})])])),_:1})}}},N=z,D=N;k()(z,"components",{QForm:U.Z,QInput:W.Z,QBtn:v.Z});const H={class:"q-gutter-y-md"},O=(0,t._)("div",{class:"text-h6"},"Profile",-1),R=(0,t._)("p",{class:"text-grey-9 text-caption"}," Update your personal information here ",-1),B=(0,t._)("div",{class:"text-h6"},"Password",-1),F=(0,t._)("p",{class:"text-grey-9 text-caption"}," Update your personal password here ",-1),A={setup(e){const a=(0,s.iH)("profile");return(e,l)=>{const o=(0,t.up)("q-tab"),u=(0,t.up)("q-tabs"),n=(0,t.up)("q-separator"),r=(0,t.up)("q-tab-panel"),d=(0,t.up)("q-tab-panels"),i=(0,t.up)("q-card");return(0,t.wg)(),(0,t.iD)("div",null,[(0,t._)("div",H,[(0,t.Wm)(i,{class:"shadow-0"},{default:(0,t.w5)((()=>[(0,t.Wm)(u,{modelValue:a.value,"onUpdate:modelValue":l[0]||(l[0]=e=>a.value=e),dense:"",class:"bg-blue-12 text-grey-4 shadow-2","active-color":"white",align:"justify","narrow-indicator":""},{default:(0,t.w5)((()=>[(0,t.Wm)(o,{name:"profile",label:"Profile"}),(0,t.Wm)(o,{name:"password",label:"Security"})])),_:1},8,["modelValue"]),(0,t.Wm)(n),(0,t.Wm)(d,{modelValue:a.value,"onUpdate:modelValue":l[1]||(l[1]=e=>a.value=e),animated:""},{default:(0,t.w5)((()=>[(0,t.Wm)(r,{name:"profile"},{default:(0,t.w5)((()=>[O,R,(0,t.Wm)(n),(0,t.Wm)((0,s.SU)(I))])),_:1}),(0,t.Wm)(r,{name:"password"},{default:(0,t.w5)((()=>[B,F,(0,t.Wm)(n),(0,t.Wm)((0,s.SU)(D))])),_:1})])),_:1},8,["modelValue"])])),_:1})])])}}};var J=l(7547),L=l(3269),E=l(5906),$=l(6602);const G=A,K=G;k()(A,"components",{QCard:f.Z,QTabs:J.Z,QTab:L.Z,QSeparator:Z.Z,QTabPanels:E.Z,QTabPanel:$.Z})}}]);