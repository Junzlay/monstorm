"use strict";(self["webpackChunkmonstorm_fe"]=self["webpackChunkmonstorm_fe"]||[]).push([[845],{9845:(e,a,t)=>{t.r(a),t.d(a,{default:()=>R});t(5363);var l=t(3673),o=t(1959),n=t(2323),i=t(8336),s=(t(3062),t(7452),t(8825)),u=t(9582),r=(t(4434),t(3617));const d={id:"q-app"},c={class:"column q-pa-lg"},m={class:"row q-pa-lg"},p=(0,l._)("h4",{class:"text-h5 text-white q-my-md"}," Forgot Password ",-1),v={class:"q-my-none text-white"},w=(0,l._)("div",{id:"recaptcha-container","data-callback":"recaptchaCallback",style:{margin:"0 auto",display:"table"},"data-theme":"light"},null,-1),f={class:"text-subtitle1 text-grey-9"},h={key:0,class:"q-pt-lg text-center",caption:""},b=(0,l._)("div",{class:"text-grey-9 text-subtitle1"},"Create your new password",-1),g={setup(e){const a=(0,s.Z)(),t=(0,u.tv)(),g=(0,r.oR)(),y=(0,o.iH)(!0),_=(0,o.iH)(!0),W=(0,o.iH)(!1),k=(0,o.iH)(1),q=(0,o.iH)(null),V=(0,o.qj)({phone_number:"",new_password:"",confirm_password:""}),S=(0,o.iH)(""),C=(0,o.iH)(""),Z=e=>{const a=/^(09|\+639)\d{9}$/;return a.test(e)||"Enter a Valid Mobile Number"},x=(0,o.iH)(!1),U={apiKey:"AIzaSyAz5jvLmvxn9goE3vGO_4pQ0B4Gt2o1-aA",authDomain:"monstorm-app.firebaseapp.com",projectId:"monstorm-app",storageBucket:"monstorm-app.appspot.com",messagingSenderId:"168503245103",appId:"1:168503245103:web:5e25816af07b88cea2c9da",measurementId:"G-ZP12D60CM8"};i.Z.initializeApp(U);const Q=()=>{setTimeout((()=>{window.recaptchaVerifier=new i.Z.auth.RecaptchaVerifier("recaptcha-container",{size:"invisible",callback:function(e){x.value=!0},"expired-callback":function(){x.value=!1,console.log("response")}}),recaptchaVerifier.render(),C.value=window.recaptchaVerifier}),1e3)};(0,o.iH)("");Q();const H=(0,o.iH)(!0),I=(0,o.iH)(59),P=()=>{I.value>0?setTimeout((()=>{I.value--,P()}),1e3):H.value=!1},N=()=>{let e="+63",t=e+V.phone_number.substring(1),l=C.value;i.Z.auth().signInWithPhoneNumber(t,l).then((function(e){window.confirmationResult=e,W.value=!1,k.value=2,I.value=59,H.value=!0,P()})).catch((function(e){W.value=!1,a.notify({type:"primary",message:"Error! Verification Not Sent"})}))},R=()=>{W.value=!0;let e=S.value;window.confirmationResult.confirm(e).then((function(e){W.value=!1,a.notify({type:"primary",message:"Verified Successfully",caption:"Last step, setting up your new password"}),k.value=3})).catch((function(e){W.value=!1,a.notify({type:"primary",message:"Incorrect verification code"})}))},z=async()=>{W.value=!0;const e=await g.dispatch("auth/checkNumber",V.phone_number);1!==e.count?(W.value=!1,a.notify({type:"negative",message:"Mobile Number is not Registered"})):N()},A=async()=>{W.value=!0;const e=await g.dispatch("auth/forgotPass",V);201==e.status?(a.notify({type:"positive",message:e.message}),t.push("/login")):(W.value=!1,a.notify({type:"negative",message:e.message}))};return(e,a)=>{const i=(0,l.up)("q-card-section"),s=(0,l.up)("q-icon"),u=(0,l.up)("q-input"),r=(0,l.up)("q-spinner-facebook"),g=(0,l.up)("q-btn"),C=(0,l.up)("q-stepper-navigation"),x=(0,l.up)("q-card-actions"),U=(0,l.up)("q-form"),Q=(0,l.up)("q-step"),P=(0,l.up)("q-stepper"),D=(0,l.up)("q-card"),F=(0,l.up)("q-page"),L=(0,l.up)("q-layout");return(0,l.wg)(),(0,l.iD)("div",d,[(0,l.Wm)(L,{view:"lHh Lpr fff"},{default:(0,l.w5)((()=>[(0,l.Wm)(F,{class:"window-height window-width row justify-center items-center",style:{background:"white"}},{default:(0,l.w5)((()=>[(0,l._)("div",c,[(0,l._)("div",m,[(0,l.Wm)(D,{rounded:"",class:"shadow-10",style:{width:"400px",height:"auto"}},{default:(0,l.w5)((()=>[(0,l.Wm)(i,{style:{background:"#708cf0",color:"white"}},{default:(0,l.w5)((()=>[p,(0,l._)("p",v,[(0,l._)("span",{style:{color:"#fff",cursor:"pointer","text-decoration":"underline"},onClick:a[0]||(a[0]=e=>(0,o.SU)(t).push("/"))},"Go back to Log in")])])),_:1}),(0,l.Wm)(P,{modelValue:k.value,"onUpdate:modelValue":a[8]||(a[8]=e=>k.value=e),"header-nav":"",ref_key:"stepper",ref:q,color:"primary",animated:""},{default:(0,l.w5)((()=>[(0,l.Wm)(Q,{name:1,title:"",icon:"manage_accounts",done:k.value>1,"header-nav":k.value>1},{default:(0,l.w5)((()=>[(0,l.Wm)(U,{class:"q-px-sm",onSubmit:z},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{debounce:"500",modelValue:(0,o.SU)(V).phone_number,"onUpdate:modelValue":a[1]||(a[1]=e=>(0,o.SU)(V).phone_number=e),label:"Mobile Number",rules:[e=>!!e||"Field is required",Z]},{append:(0,l.w5)((()=>[(0,l.Wm)(s,{name:"tag"})])),_:1},8,["modelValue","rules"]),w,(0,l.Wm)(x,{align:"right"},{default:(0,l.w5)((()=>[(0,l.Wm)(C,null,{default:(0,l.w5)((()=>[(0,l.Wm)(g,{type:"submit",loading:W.value,style:{background:"#708cf0",color:"white"},unelevated:"",label:"Continue"},{loading:(0,l.w5)((()=>[(0,l.Wm)(r)])),_:1},8,["loading"])])),_:1})])),_:1})])),_:1})])),_:1},8,["done","header-nav"]),(0,l.Wm)(Q,{name:2,title:"",icon:"verified_user",done:k.value>2,"header-nav":k.value>2},{default:(0,l.w5)((()=>[(0,l.Wm)(U,{onSubmit:R},{default:(0,l.w5)((()=>[(0,l._)("div",f,"Verification Code was sent to your mobile number "+(0,n.zw)((0,o.SU)(V).phone_number.replace((0,o.SU)(V).phone_number.substring(4,8),"****")),1),(0,l.Wm)(u,{modelValue:S.value,"onUpdate:modelValue":a[2]||(a[2]=e=>S.value=e),label:"Verification Code",mask:"# # # # # #","unmasked-value":"",rules:[e=>!!e||"Code is required",e=>6===e.length||"Code must contains 6 digits"]},null,8,["modelValue","rules"]),(0,l._)("div",null,[(0,l.Wm)(g,{disabled:H.value,onClick:N,flat:"",color:"primary",label:"Resend Code",class:"q-mt-lg"},null,8,["disabled"]),(0,l.Wm)(C,{class:"float-right"},{default:(0,l.w5)((()=>[(0,l.Wm)(g,{flat:"",onClick:a[3]||(a[3]=e=>k.value=1),color:"primary",label:"Back",class:"q-ml-sm"}),(0,l.Wm)(g,{type:"submit",loading:W.value,style:{background:"#708cf0",color:"white"},unelevated:"",label:"Verify"},{loading:(0,l.w5)((()=>[(0,l.Wm)(r)])),_:1},8,["loading"])])),_:1})]),I.value>0?((0,l.wg)(),(0,l.iD)("div",h," Resend Code will be available at "+(0,n.zw)(I.value)+" seconds ",1)):(0,l.kq)("",!0)])),_:1})])),_:1},8,["done","header-nav"]),(0,l.Wm)(Q,{title:"",name:3,icon:"lock","header-nav":k.value>3},{default:(0,l.w5)((()=>[b,(0,l.Wm)(U,{onSubmit:A},{default:(0,l.w5)((()=>[(0,l.Wm)(u,{debounce:"500",modelValue:(0,o.SU)(V).new_password,"onUpdate:modelValue":a[5]||(a[5]=e=>(0,o.SU)(V).new_password=e),label:"New Password",type:y.value?"password":"text",rules:[e=>e.length>7||"Password shoud have at least 8 character"]},{append:(0,l.w5)((()=>[(0,l.Wm)(s,{name:y.value?"visibility_off":"visibility",class:"cursor-pointer",onClick:a[4]||(a[4]=e=>y.value=!y.value)},null,8,["name"])])),_:1},8,["modelValue","type","rules"]),(0,l.Wm)(u,{debounce:"500",modelValue:(0,o.SU)(V).confirm_password,"onUpdate:modelValue":a[7]||(a[7]=e=>(0,o.SU)(V).confirm_password=e),label:"Confirm Password",type:_.value?"password":"text",rules:[e=>e==(0,o.SU)(V).new_password||"Password Does not match"]},{append:(0,l.w5)((()=>[(0,l.Wm)(s,{name:_.value?"visibility_off":"visibility",class:"cursor-pointer",onClick:a[6]||(a[6]=e=>_.value=!_.value)},null,8,["name"])])),_:1},8,["modelValue","type","rules"]),(0,l.Wm)(x,{align:"right"},{default:(0,l.w5)((()=>[(0,l.Wm)(C,null,{default:(0,l.w5)((()=>[(0,l.Wm)(g,{type:"submit",loading:W.value,style:{background:"#708cf0",color:"white"},unelevated:"",label:"Finish"},{loading:(0,l.w5)((()=>[(0,l.Wm)(r)])),_:1},8,["loading"])])),_:1})])),_:1})])),_:1})])),_:1},8,["header-nav"])])),_:1},8,["modelValue"]),(0,l.Wm)(i)])),_:1})])])])),_:1})])),_:1})])}}};var y=t(3066),_=t(4379),W=t(151),k=t(5589),q=t(3518),V=t(6552),S=t(5269),C=t(4842),Z=t(4554),x=t(9367),U=t(6877),Q=t(2165),H=t(8719),I=t(7518),P=t.n(I);const N=g,R=N;P()(g,"components",{QLayout:y.Z,QPage:_.Z,QCard:W.Z,QCardSection:k.Z,QStepper:q.Z,QStep:V.Z,QForm:S.Z,QInput:C.Z,QIcon:Z.Z,QCardActions:x.Z,QStepperNavigation:U.Z,QBtn:Q.Z,QSpinnerFacebook:H.Z})}}]);