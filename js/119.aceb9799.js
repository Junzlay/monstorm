"use strict";(self["webpackChunkmonstorm_fe"]=self["webpackChunkmonstorm_fe"]||[]).push([[119],{3119:(e,l,t)=>{t.r(l),t.d(l,{default:()=>T});t(2100);var a=t(3673),o=t(1959),n=t(8880),s=t(2323),i=t(5616),r=t(2841),u=t(2635),c=t(3617),d=t(9582),p=t(5225),m=t(7946);const w={class:"text-grey-8"},g={class:"text-grey-8"},b={setup(e){p.Z.addLocale(m);const l=new p.Z("en-US"),t=[{name:"product",required:!0,label:"Product",align:"left",field:e=>e.product.product_name,format:e=>`${e}`,sortable:!0},{name:"quantity",align:"center",label:"Quantity",field:e=>e.booking.quantity+" item(s)",sortable:!0},{name:"type",align:"center",field:e=>e.booking.booking_type,label:"Type",sortable:!0},{name:"delivery",sortable:!0,align:"center",label:"Delivery Date",field:e=>"Today"},{name:"pickup",align:"center",label:"Pickup Date",field:e=>e.booking.pickup_date?l.format(new Date(e.booking.pickup_date)-6e4):""},{name:"date",align:"center",label:"Issued Date",field:e=>k(e.created_at,"MMMM DD, YYYY")},{name:"actions",align:"center",label:"Action"}],b=(0,d.tv)(),f=((0,o.iH)([1]),(0,c.oR)()),{formatDate:k}=i.ZP,y=(0,o.iH)(""),_=(0,o.qj)(JSON.parse(localStorage.getItem("user"))),v=((0,o.iH)([]),(0,o.iH)(!0),(0,o.iH)(!0)),q=(0,a.f3)("getStatus"),h=(0,a.f3)("pusher"),M=(0,a.f3)("emitter"),W=(0,o.iH)(!1),D=(0,o.iH)([]),Y=(0,o.iH)([{name:"All",status:10},{name:"Delivering",status:3},{name:"Pending",status:0},{name:"Ready to pick up",status:6},{name:"Processing",status:1},{name:"Not Approved",status:2},{name:"Done",status:5}]),S=(0,o.iH)(Y.value[0]);f.dispatch("getTransactionByID",_.id);const U=(0,a.Fl)((()=>10!==S.value.status||4==S.value.status||5==S.value.status?f.getters.userTransaction.filter((e=>e.booking.status==S.value.status)):f.getters.userTransaction)),Z=()=>0===D.value.length?"":`${D.value.length} record${D.value.length>1?"s":""} selected of ${U.value.length}`,x=h.subscribe("monstorm-notify-user-"+_.id);x.bind("User",(function(e){f.dispatch("getTransactionByID",_.id)})),(0,a.bv)((()=>{"complete"===document.readyState?v.value=!1:document.addEventListener("readystatechange",(function(){"complete"===document.readyState&&(v.value=!1)}))}));const Q=(e,l)=>{"TD"===e.target.nodeName&&(M.emit("appBar",l.booking),b.push({name:"Customer Transaction",params:{data:JSON.stringify(l)}}))},j=e=>{M.emit("appBar",e.booking),b.push({name:"Customer Transaction",params:{data:JSON.stringify(e)}})},z=(e,l,t)=>{let a=void 0!==l?l(e,t):e;return a=void 0===a||null===a?"":String(a),a=a.split('"').join('""'),`"${a}"`},C=()=>{const e=[t.map((e=>z(e.label)))].concat(U.value.map((e=>t.map((l=>z("function"===typeof l.field?l.field(e):e[void 0===l.field?l.name:l.field],l.format,e))).join(",")))).join("\r\n"),l=(0,r.Z)("transaction.csv",e,"text/csv");!0!==l&&$q.notify({message:"Browser denied file download...",color:"negative",icon:"warning"})};return(e,l)=>{const i=(0,a.up)("q-icon"),r=(0,a.up)("q-th"),c=(0,a.up)("q-select"),d=(0,a.up)("q-space"),p=(0,a.up)("q-input"),m=(0,a.up)("q-btn"),b=(0,a.up)("q-item-label"),f=(0,a.up)("q-badge"),_=(0,a.up)("q-item-section"),h=(0,a.up)("q-td"),M=(0,a.up)("q-chip"),x=(0,a.up)("q-item"),z=(0,a.up)("q-list"),T=(0,a.up)("q-card"),H=(0,a.up)("q-table"),I=(0,a.up)("q-page");return(0,a.wg)(),(0,a.j4)(I,null,{default:(0,a.w5)((()=>[v.value?((0,a.wg)(),(0,a.j4)((0,o.SU)(u.Z),{key:0})):((0,a.wg)(),(0,a.j4)(H,{key:1,class:"q-pb-lg",grid:e.$q.screen.sm||e.$q.screen.xs,"virtual-scroll":"",style:{height:"100%",background:"white"},title:"Transactions",rows:(0,o.SU)(U).sort(((e,l)=>e.createdAt-l.created_at)),columns:t,"row-key":"id",filter:y.value,onRowClick:(0,n.iM)(Q,["stop"]),loading:W.value,"selected-rows-label":Z,selection:"multiple",selected:D.value,"onUpdate:selected":l[2]||(l[2]=e=>D.value=e),selectedModifiers:{sync:!0}},{"header-cell":(0,a.w5)((e=>[(0,a.Wm)(r,{props:e},{default:(0,a.w5)((()=>[(0,a.Wm)(i,{name:"lock_open",size:"1.5em"}),(0,a.Uk)(" "+(0,s.zw)(e.col.label),1)])),_:2},1032,["props"])])),top:(0,a.w5)((t=>[(0,a.Wm)(c,{modelValue:S.value,"onUpdate:modelValue":l[0]||(l[0]=e=>S.value=e),filled:"",dense:"","bg-color":"indigo-1","option-label":e=>e.name,options:Y.value,style:{width:"200px"},label:"Filter by Status"},null,8,["modelValue","option-label","options"]),(0,a.Wm)(d),(0,a.Wm)(p,{borderless:"",dense:"",debounce:"300",modelValue:y.value,"onUpdate:modelValue":l[1]||(l[1]=e=>y.value=e),placeholder:"Search"},{append:(0,a.w5)((()=>[(0,a.Wm)(i,{name:"search"})])),_:1},8,["modelValue"]),(0,a.Wm)(m,{class:"q-ml-xs",color:"primary","icon-right":"archive",label:"Export","no-caps":"",size:"sm",onClick:C}),e.$q.screen.xs?(0,a.kq)("",!0):((0,a.wg)(),(0,a.j4)(m,{key:0,flat:"",round:"",dense:"",icon:t.inFullscreen?"fullscreen_exit":"fullscreen",onClick:t.toggleFullscreen,class:"q-ml-md"},null,8,["icon","onClick"]))])),"body-cell-product":(0,a.w5)((e=>[(0,a.Wm)(h,{props:e},{default:(0,a.w5)((()=>[(0,a.Wm)(_,null,{default:(0,a.w5)((()=>[(0,a.Wm)(b,{class:"text-dark"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,s.zw)(e.row.product.product_name),1)])),_:2},1024),(0,a.Wm)(b,{"text-caption":""},{default:(0,a.w5)((()=>[(0,a.Wm)(f,{color:(0,o.SU)(q)(e.row.booking.status,"color"),label:(0,o.SU)(q)(e.row.booking.status,"label")},null,8,["color","label"])])),_:2},1024)])),_:2},1024)])),_:2},1032,["props"])])),"body-cell-type":(0,a.w5)((e=>[(0,a.Wm)(h,{props:e},{default:(0,a.w5)((()=>[(0,a.Wm)(b,{class:"text-dark"},{default:(0,a.w5)((()=>["Free Delivery"===e.row.booking.booking_type?((0,a.wg)(),(0,a.j4)(i,{key:0,name:"directions_car",size:"20px"})):((0,a.wg)(),(0,a.j4)(i,{key:1,name:"hail",size:"20px"})),(0,a.Uk)((0,s.zw)(e.row.booking.booking_type),1)])),_:2},1024)])),_:2},1032,["props"])])),"body-cell-delivery":(0,a.w5)((e=>[(0,a.Wm)(h,{props:e},{default:(0,a.w5)((()=>[(0,a.Wm)(_,null,{default:(0,a.w5)((()=>[(0,a.Wm)(b,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,s.zw)(e.row.booking.delivery_date?(0,o.SU)(k)(e.row.booking.delivery_date,"MMMM DD, YYYY"):""),1)])),_:2},1024),(0,a.Wm)(b,{caption:""},{default:(0,a.w5)((()=>[(0,a._)("div",w,(0,s.zw)((0,o.SU)(k)(e.row.booking.delivery_date,"MMMM DD, YYYY")==(0,o.SU)(k)(new Date,"MMMM DD, YYYY")?"Today":""),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["props"])])),"body-cell-pickup":(0,a.w5)((e=>[(0,a.Wm)(h,{props:e},{default:(0,a.w5)((()=>[(0,a.Wm)(_,null,{default:(0,a.w5)((()=>[(0,a.Wm)(b,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,s.zw)(e.row.booking.pickup_date?(0,o.SU)(k)(e.row.booking.pickup_date,"MMMM DD, YYYY"):""),1)])),_:2},1024),(0,a.Wm)(b,{caption:""},{default:(0,a.w5)((()=>[(0,a._)("div",g,(0,s.zw)((0,o.SU)(k)(e.row.booking.pickup_date,"MMMM DD, YYYY")==(0,o.SU)(k)(new Date,"MMMM DD, YYYY")?"Today":""),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["props"])])),"body-cell-actions":(0,a.w5)((e=>[(0,a.Wm)(h,{props:e},null,8,["props"])])),item:(0,a.w5)((e=>[(0,a._)("div",{class:"q-pa-xs col-xs-12 col-sm-6 col-md-4 col-lg-3 grid-style-transition",style:(0,s.j5)(e.selected?"transform: scale(0.95);":"")},[(0,a.Wm)(T,{class:(0,s.C_)(e.selected?"bg-grey-2":"")},{default:(0,a.w5)((()=>[(0,a.Wm)(z,{dense:""},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.cols,(l=>((0,a.wg)(),(0,a.j4)(x,{key:l.name},{default:(0,a.w5)((()=>[(0,a.Wm)(_,null,{default:(0,a.w5)((()=>[(0,a.Wm)(b,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,s.zw)(l.label),1)])),_:2},1024)])),_:2},1024),(0,a.Wm)(_,{side:""},{default:(0,a.w5)((()=>["Product"===l.name?((0,a.wg)(),(0,a.j4)(M,{key:0,color:e.row.carbs>24?"green":"red","text-color":"white",dense:"",size:"sm",class:"text-weight-bolder",square:""},{default:(0,a.w5)((()=>[(0,a.Uk)((0,s.zw)(l.value),1)])),_:2},1032,["color"])):"actions"===l.name?((0,a.wg)(),(0,a.j4)(h,{key:1},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{dense:"",size:"md",round:"",flat:"",color:"primary",icon:"visibility",onClick:l=>j(e.row)},null,8,["onClick"])])),_:2},1024)):((0,a.wg)(),(0,a.j4)(b,{key:2,class:(0,s.C_)(l.classes?l.classes:"")},{default:(0,a.w5)((()=>[(0,a.Uk)((0,s.zw)(l.value),1)])),_:2},1032,["class"])),"product"===l.name?((0,a.wg)(),(0,a.j4)(b,{key:3,"text-caption":""},{default:(0,a.w5)((()=>[(0,a.Wm)(f,{color:(0,o.SU)(q)(e.row.booking.status,"color"),label:(0,o.SU)(q)(e.row.booking.status,"label")},null,8,["color","label"])])),_:2},1024)):(0,a.kq)("",!0)])),_:2},1024)])),_:2},1024)))),128))])),_:2},1024)])),_:2},1032,["class"])],4)])),_:1},8,["grid","rows","filter","onRowClick","loading","selected"]))])),_:1})}}};var f=t(4379),k=t(7678),y=t(2414),_=t(4554),v=t(3314),q=t(2025),h=t(4842),M=t(2165),W=t(3884),D=t(2035),Y=t(2350),S=t(9721),U=t(151),Z=t(7011),x=t(3414),Q=t(7030),j=t(7518),z=t.n(j);const C=b,T=C;z()(b,"components",{QPage:f.Z,QTable:k.Z,QTh:y.Z,QIcon:_.Z,QSelect:v.Z,QSpace:q.Z,QInput:h.Z,QBtn:M.Z,QTd:W.Z,QItemSection:D.Z,QItemLabel:Y.Z,QBadge:S.Z,QCard:U.Z,QList:Z.Z,QItem:x.Z,QChip:Q.Z})}}]);