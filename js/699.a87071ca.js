"use strict";(self["webpackChunkmonstorm_fe"]=self["webpackChunkmonstorm_fe"]||[]).push([[699],{6699:(e,l,o)=>{o.r(l),o.d(l,{default:()=>I});var a=o(3673),t=o(2323),i=o(1959),d=o(9582),s=o(8825),n=o(5616);const r=(0,a._)("div",{class:"text-subtitle1"},"Booking Details",-1),u={class:"row"},c={class:"col-12 col-md"},p={class:"col-12 col-md"},m={class:"row items-center justify-end"},b={class:"row items-center justify-end"},g=(0,a._)("div",{class:"text-subtitle1 q-mb-sm q-mt-md"},"Customer Information",-1),_={class:"row"},v={class:"col-12 col-md"},y={class:"col-12 col-md"},f={setup(e){const{formatDate:l}=n.ZP,o=(0,a.f3)("store"),f=(0,s.Z)(),k=e=>{if(!/\d/.test(e.key)&&"."!==e.key)return e.preventDefault()},q=(0,i.qj)(JSON.parse(localStorage.getItem("user")));o.dispatch("getAllProducts");(0,i.iH)(null),(0,i.iH)(null);const w=(0,i.iH)(!1),S=(0,d.tv)(),U=e=>e>=l(Date.now(),"YYYY/MM/DD"),V=async()=>{w.value=!0,await o.dispatch("updateTransaction",C.value).then((e=>{200==e.status&&(w.value=!1,f.notify({message:"Transaction update Successfully",caption:"Your transaction is now awaiting",color:"primary"}),S.back())})).catch((e=>{w.value=!1,f.notify({message:"Something went wrong",color:"negative"}),S.back()}))};f.iconSet.arrow.dropdown="expand_more";const h=(0,a.Fl)((()=>o.getters.allProducts)),W=(0,i.iH)(0),D=(0,i.iH)("Date"),Z=(0,i.qj)({id:null,address:q.address,phone_number:q.phone_number,quantity:1,status:0,pickup_date:null}),F=e=>{D.value="Free Delivery"===e?"Delivery Date":"Pickup Date"},Q=e=>{const l=/^(09|\+639)\d{9}$/;return l.test(e)||"Invalid Mobile Number"},C=(0,a.Fl)((()=>{let e=Z.product_id.id;return{...Z,product_id:e}})),P=e=>{W.value=String(Number(Z.product_id.price*e).toFixed(3).slice(0,-1))},j=e=>{W.value=String(Number(e.price*Z.quantity).toFixed(3).slice(0,-1))};if(S.currentRoute.value.params){const e=JSON.parse(S.currentRoute.value.params.data);F(e.booking.booking_type),Z.address=e.booking.address,Z.phone_number=e.booking.phone_number,Z.id=e.booking.id,Z.product_id=e.product,Z.pickup_date=e.booking.pickup_date,Z.quantity=e.booking.quantity,Z.delivery_date=e.booking.delivery_date,Z.booking_type=e.booking.booking_type,Z.status=e.booking.status,Z.id=e.booking.id,Z.user_id=e.booking.user.id,Z.booking=e.booking,P(e.booking.quantity)}return(e,l)=>{const o=(0,a.up)("q-select"),d=(0,a.up)("q-input"),s=(0,a.up)("q-btn-group"),n=(0,a.up)("q-btn"),q=(0,a.up)("q-date"),S=(0,a.up)("q-popup-proxy"),C=(0,a.up)("q-icon"),x=(0,a.up)("q-spinner-facebook"),I=(0,a.up)("q-card-actions"),N=(0,a.up)("q-form"),H=(0,a.up)("q-card"),M=(0,a.up)("q-page"),Y=(0,a.Q2)("close-popup");return(0,a.wg)(),(0,a.j4)(M,{class:"items-center"},{default:(0,a.w5)((()=>[r,(0,a.Wm)(H,{class:"shadow-0 q-pb-lg"},{default:(0,a.w5)((()=>[(0,a.Wm)(N,{class:"q-mt-sm",onSubmit:V},{default:(0,a.w5)((()=>[(0,a._)("div",u,[(0,a._)("div",c,[(0,a._)("div",{class:(0,t.C_)((0,i.SU)(f).screen.lt.md?"":"q-pr-lg q-mr-lg")},[(0,a.Wm)(o,{filled:"","bg-color":"indigo-1","transition-show":"jump-up","transition-hide":"jump-up",modelValue:(0,i.SU)(Z).product_id,"onUpdate:modelValue":[l[0]||(l[0]=e=>(0,i.SU)(Z).product_id=e),l[1]||(l[1]=e=>j(e))],options:(0,i.SU)(h),"option-label":e=>e.product_name+" - ₱"+e.price,label:"Product",rules:[e=>!!e||"*Field is required"]},null,8,["modelValue","options","option-label","rules"]),(0,a.Wm)(o,{filled:"","bg-color":"indigo-1","transition-show":"jump-up","transition-hide":"jump-up",class:"q-mt-lg q-mb-lg",modelValue:(0,i.SU)(Z).booking_type,"onUpdate:modelValue":[l[2]||(l[2]=e=>(0,i.SU)(Z).booking_type=e),l[3]||(l[3]=e=>F(e))],options:["Free Delivery","Pickup Item"],label:"Booking Type",rules:[e=>!!e||"*Field is required"]},null,8,["modelValue","rules"])],2)]),(0,a._)("div",p,[(0,a._)("div",{class:(0,t.C_)((0,i.SU)(f).screen.lt.md||(0,i.SU)(f).screen.lt.sm?"":"q-pl-lg q-ml-lg ")},[(0,a.Wm)(s,{spread:"",class:"bg-white border-0 shadow-0"},{default:(0,a.w5)((()=>[(0,a.Wm)(d,{modelValue:(0,i.SU)(Z).quantity,"onUpdate:modelValue":l[4]||(l[4]=e=>(0,i.SU)(Z).quantity=e),modelModifiers:{number:!0},onKeypress:k,"bg-color":"indigo-1",onKeyup:l[5]||(l[5]=e=>P(e)),label:"Quantity",filled:"",rules:[e=>!!e||"*Field is required"]},null,8,["modelValue","rules"]),(0,a.Wm)(d,{class:"q-ml-lg",modelValue:W.value,"onUpdate:modelValue":l[6]||(l[6]=e=>W.value=e),modelModifiers:{number:!0},prefix:"₱",type:"number","bg-color":"indigo-1",label:"Total",filled:"",readonly:""},null,8,["modelValue"])])),_:1}),"Free Delivery"===(0,i.SU)(Z).booking_type?((0,a.wg)(),(0,a.j4)(d,{key:0,label:D.value,filled:"","bg-color":"indigo-1",modelValue:(0,i.SU)(Z).delivery_date,"onUpdate:modelValue":l[8]||(l[8]=e=>(0,i.SU)(Z).delivery_date=e),mask:"date",class:"q-mt-lg"},{append:(0,a.w5)((()=>[(0,a.Wm)(C,{name:"event",class:"cursor-pointer"},{default:(0,a.w5)((()=>[(0,a.Wm)(S,{ref:"qDateProxy",cover:"","transition-show":"scale","transition-hide":"scale"},{default:(0,a.w5)((()=>[(0,a.Wm)(q,{modelValue:(0,i.SU)(Z).delivery_date,"onUpdate:modelValue":l[7]||(l[7]=e=>(0,i.SU)(Z).delivery_date=e),options:U},{default:(0,a.w5)((()=>[(0,a._)("div",m,[(0,a.wy)((0,a.Wm)(n,{label:"Save",color:"primary",flat:""},null,512),[[Y]])])])),_:1},8,["modelValue"])])),_:1},512)])),_:1})])),_:1},8,["label","modelValue"])):((0,a.wg)(),(0,a.j4)(d,{key:1,label:D.value,filled:"","bg-color":"indigo-1",modelValue:(0,i.SU)(Z).pickup_date,"onUpdate:modelValue":l[10]||(l[10]=e=>(0,i.SU)(Z).pickup_date=e),mask:"date",class:"q-mt-lg"},{append:(0,a.w5)((()=>[(0,a.Wm)(C,{name:"event",class:"cursor-pointer"},{default:(0,a.w5)((()=>[(0,a.Wm)(S,{ref:"qDateProxy",cover:"","transition-show":"scale","transition-hide":"scale"},{default:(0,a.w5)((()=>[(0,a.Wm)(q,{modelValue:(0,i.SU)(Z).pickup_date,"onUpdate:modelValue":l[9]||(l[9]=e=>(0,i.SU)(Z).pickup_date=e),options:U},{default:(0,a.w5)((()=>[(0,a._)("div",b,[(0,a.wy)((0,a.Wm)(n,{label:"Save",color:"primary",flat:""},null,512),[[Y]])])])),_:1},8,["modelValue"])])),_:1},512)])),_:1})])),_:1},8,["label","modelValue"]))],2)])]),g,(0,a._)("div",_,[(0,a._)("div",v,[(0,a._)("div",{class:(0,t.C_)((0,i.SU)(f).screen.lt.md?"":"q-pr-lg q-mr-lg")},[(0,a.Wm)(d,{class:"q-mb-lg","bg-color":"indigo-1",filled:"",modelValue:(0,i.SU)(Z).address,"onUpdate:modelValue":l[11]||(l[11]=e=>(0,i.SU)(Z).address=e),rules:[e=>!!e||"Field is required"],label:"Address"},null,8,["modelValue","rules"])],2)]),(0,a._)("div",y,[(0,a._)("div",{class:(0,t.C_)((0,i.SU)(f).screen.lt.md||(0,i.SU)(f).screen.lt.sm?"":"q-pl-lg q-ml-lg ")},[(0,a.Wm)(d,{class:"q-mb-sm","bg-color":"indigo-1",filled:"",modelValue:(0,i.SU)(Z).phone_number,"onUpdate:modelValue":l[12]||(l[12]=e=>(0,i.SU)(Z).phone_number=e),onKeypress:k,label:"Contact Number",rules:[e=>!!e||"Field is required",Q]},null,8,["modelValue","rules"])],2)])]),(0,a.Wm)(I,{align:"right"},{default:(0,a.w5)((()=>[(0,a.Wm)(n,{align:"left",onClick:l[13]||(l[13]=l=>e.$router.back()),class:"btn-fixed-width",flat:"",color:"primary",label:"Cancel"}),(0,a.Wm)(n,{loading:w.value,type:"submit",unelevated:"",style:{background:"#4b88fe",color:"white"},label:"Update"},{loading:(0,a.w5)((()=>[(0,a.Wm)(x)])),_:1},8,["loading"])])),_:1})])),_:1})])),_:1})])),_:1})}}};var k=o(4379),q=o(151),w=o(5269),S=o(3314),U=o(6375),V=o(4842),h=o(4554),W=o(3944),D=o(6915),Z=o(2165),F=o(9367),Q=o(8719),C=o(677),P=o(7518),j=o.n(P);const x=f,I=x;j()(f,"components",{QPage:k.Z,QCard:q.Z,QForm:w.Z,QSelect:S.Z,QBtnGroup:U.Z,QInput:V.Z,QIcon:h.Z,QPopupProxy:W.Z,QDate:D.Z,QBtn:Z.Z,QCardActions:F.Z,QSpinnerFacebook:Q.Z}),j()(f,"directives",{ClosePopup:C.Z})}}]);