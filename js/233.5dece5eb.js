"use strict";(self["webpackChunkmonstorm_fe"]=self["webpackChunkmonstorm_fe"]||[]).push([[233],{233:(e,a,t)=>{t.r(a),t.d(a,{default:()=>R});t(5363);var l=t(3673),o=t(1959),n=t(2323),i=(t(5720),t(7410),t(8336)),s=(t(3062),t(7452),t(8825)),u=t(9582),r=(t(4434),t(3617));const d={id:"q-app"},m={class:"column q-pa-lg"},c={class:"row q-pa-lg"},p=(0,l._)("h4",{class:"text-h5 text-white q-my-md"}," Create Monstorm Account ",-1),v={class:"q-my-none text-white"},f=(0,l.Uk)(" Already have an account? "),w=(0,l._)("div",{class:"text-subtitle1 text-grey-9"},"Add Personal Information",-1),h=(0,l._)("div",{id:"recaptcha-container","data-callback":"recaptchaCallback",style:{margin:"0 auto",display:"table"},"data-theme":"light"},null,-1),b={class:"text-subtitle1 text-grey-9"},g={key:0,class:"q-pt-lg text-center",caption:""},y=(0,l._)("div",{class:"text-grey-9 text-subtitle1"},"Create your password",-1),_={setup(e){const a=(0,s.Z)(),t=(0,u.tv)(),_=(0,r.oR)(),W=(0,o.iH)(!0),V=(0,o.iH)(!0),q=(0,o.iH)(!1),k=(0,o.iH)(1),S=(0,o.iH)(null),C=(0,o.qj)({name:"",phone_number:"",address:"",password:"",password_confirmation:"",user_type:"customer"}),U=(0,o.iH)(""),Z=(0,o.iH)(""),x=e=>{const a=/^(09|\+639)\d{9}$/;return a.test(e)||"Enter a Valid Mobile Number"},Q=(0,o.iH)(!1),H={apiKey:"AIzaSyAz5jvLmvxn9goE3vGO_4pQ0B4Gt2o1-aA",authDomain:"monstorm-app.firebaseapp.com",projectId:"monstorm-app",storageBucket:"monstorm-app.appspot.com",messagingSenderId:"168503245103",appId:"1:168503245103:web:5e25816af07b88cea2c9da",measurementId:"G-ZP12D60CM8"};i.Z.initializeApp(H);const I=()=>{setTimeout((()=>{window.recaptchaVerifier=new i.Z.auth.RecaptchaVerifier("recaptcha-container",{size:"invisible",callback:function(e){Q.value=!0},"expired-callback":function(){Q.value=!1,console.log("response")}}),recaptchaVerifier.render(),Z.value=window.recaptchaVerifier}),1e3)};(0,o.iH)("");I();const A=(0,o.iH)(!0),P=(0,o.iH)(5),N=()=>{P.value>0?setTimeout((()=>{P.value--,N()}),1e3):A.value=!1};N();const F=()=>{let e="+63",t=e+C.phone_number.substring(1),l=Z.value;i.Z.auth().signInWithPhoneNumber(t,l).then((function(e){window.confirmationResult=e,q.value=!1,k.value=2})).catch((function(e){q.value=!1,a.notify({type:"primary",message:"Error! Verification Not Sent"})}))},R=()=>{q.value=!0;let e=U.value;window.confirmationResult.confirm(e).then((function(e){q.value=!1,a.notify({type:"primary",message:"Verified Successfully",caption:"Last step, setting up your password"}),k.value=3})).catch((function(e){q.value=!1,a.notify({type:"primary",message:"Incorrect verification code"})}))},z=async()=>{q.value=!0;const e=await _.dispatch("auth/checkNumber",C.phone_number);1===e.count?(q.value=!1,a.notify({type:"negative",message:"Phone Number is used already"})):F()},D=async()=>{q.value=!0;const e=await _.dispatch("auth/doRegister",C);201==e.status?(a.notify({type:"positive",message:e.message}),t.push("/login")):(q.value=!1,a.notify({type:"negative",message:e.message}))};return(e,a)=>{const t=(0,l.up)("q-card-section"),i=(0,l.up)("q-icon"),s=(0,l.up)("q-input"),u=(0,l.up)("q-spinner-facebook"),r=(0,l.up)("q-btn"),_=(0,l.up)("q-stepper-navigation"),Z=(0,l.up)("q-card-actions"),Q=(0,l.up)("q-form"),H=(0,l.up)("q-step"),I=(0,l.up)("q-stepper"),N=(0,l.up)("q-card"),F=(0,l.up)("q-page"),L=(0,l.up)("q-layout");return(0,l.wg)(),(0,l.iD)("div",d,[(0,l.Wm)(L,{view:"lHh Lpr fff"},{default:(0,l.w5)((()=>[(0,l.Wm)(F,{class:"window-height window-width row justify-center items-center",style:{background:"white"}},{default:(0,l.w5)((()=>[(0,l._)("div",m,[(0,l._)("div",c,[(0,l.Wm)(N,{rounded:"",class:"shadow-10",style:{width:"400px",height:"auto"}},{default:(0,l.w5)((()=>[(0,l.Wm)(t,{class:"bg-blue-7"},{default:(0,l.w5)((()=>[p,(0,l._)("p",v,[f,(0,l._)("span",{style:{color:"#fff",cursor:"pointer","text-decoration":"underline"},onClick:a[0]||(a[0]=e=>this.$router.push("/"))},"Log in")])])),_:1}),(0,l.Wm)(I,{modelValue:k.value,"onUpdate:modelValue":a[10]||(a[10]=e=>k.value=e),"header-nav":"",ref_key:"stepper",ref:S,color:"primary",animated:""},{default:(0,l.w5)((()=>[(0,l.Wm)(H,{name:1,title:"",icon:"manage_accounts",done:k.value>1,"header-nav":k.value>1},{default:(0,l.w5)((()=>[(0,l.Wm)(Q,{class:"q-px-sm",onSubmit:z},{default:(0,l.w5)((()=>[w,(0,l.Wm)(s,{label:"Full Name",modelValue:(0,o.SU)(C).name,"onUpdate:modelValue":a[1]||(a[1]=e=>(0,o.SU)(C).name=e),rules:[e=>!!e||"Field is required"]},{append:(0,l.w5)((()=>[(0,l.Wm)(i,{name:"o_person"})])),_:1},8,["modelValue","rules"]),(0,l.Wm)(s,{debounce:"500",modelValue:(0,o.SU)(C).phone_number,"onUpdate:modelValue":a[2]||(a[2]=e=>(0,o.SU)(C).phone_number=e),label:"Mobile Number",rules:[e=>!!e||"Field is required",x]},{append:(0,l.w5)((()=>[(0,l.Wm)(i,{name:"tag"})])),_:1},8,["modelValue","rules"]),(0,l.Wm)(s,{modelValue:(0,o.SU)(C).address,"onUpdate:modelValue":a[3]||(a[3]=e=>(0,o.SU)(C).address=e),label:"Address",rules:[e=>!!e||"Field is required"]},{append:(0,l.w5)((()=>[(0,l.Wm)(i,{name:"o_room"})])),_:1},8,["modelValue","rules"]),h,(0,l.Wm)(Z,{align:"right"},{default:(0,l.w5)((()=>[(0,l.Wm)(_,null,{default:(0,l.w5)((()=>[(0,l.Wm)(r,{type:"submit",loading:q.value,color:"primary",unelevated:"",label:"Continue"},{loading:(0,l.w5)((()=>[(0,l.Wm)(u)])),_:1},8,["loading"])])),_:1})])),_:1})])),_:1})])),_:1},8,["done","header-nav"]),(0,l.Wm)(H,{name:2,title:"",icon:"verified_user",done:k.value>2,"header-nav":k.value>2},{default:(0,l.w5)((()=>[(0,l.Wm)(Q,{onSubmit:R},{default:(0,l.w5)((()=>[(0,l._)("div",b,"Verification Code was sent to your mobile number "+(0,n.zw)((0,o.SU)(C).phone_number.replace((0,o.SU)(C).phone_number.substring(4,8),"****")),1),(0,l.Wm)(s,{modelValue:U.value,"onUpdate:modelValue":a[4]||(a[4]=e=>U.value=e),debounce:"500",label:"Verification Code",mask:"# # # # # #","unmasked-value":"",rules:[e=>!!e||"Code is required",e=>6===e.length||"Code must contains 6 digits"]},null,8,["modelValue","rules"]),(0,l._)("div",null,[(0,l.Wm)(r,{disabled:A.value,flat:"",color:"primary",label:"Resend Code",class:"q-mt-lg"},null,8,["disabled"]),(0,l.Wm)(_,{class:"float-right"},{default:(0,l.w5)((()=>[(0,l.Wm)(r,{flat:"",onClick:a[5]||(a[5]=e=>k.value=1),color:"primary",label:"Back",class:"q-ml-sm"}),(0,l.Wm)(r,{type:"submit",loading:q.value,color:"primary",unelevated:"",label:"Verify"},{loading:(0,l.w5)((()=>[(0,l.Wm)(u)])),_:1},8,["loading"])])),_:1})]),P.value>0?((0,l.wg)(),(0,l.iD)("div",g," Resend Code will be available at "+(0,n.zw)(P.value)+" seconds ",1)):(0,l.kq)("",!0)])),_:1})])),_:1},8,["done","header-nav"]),(0,l.Wm)(H,{title:"",name:3,icon:"lock","header-nav":k.value>3},{default:(0,l.w5)((()=>[y,(0,l.Wm)(Q,{onSubmit:D},{default:(0,l.w5)((()=>[(0,l.Wm)(s,{debounce:"500",modelValue:(0,o.SU)(C).password,"onUpdate:modelValue":a[7]||(a[7]=e=>(0,o.SU)(C).password=e),label:"Password",type:W.value?"password":"text",rules:[e=>e.length>7||"Password shoud have at least 8 character"]},{append:(0,l.w5)((()=>[(0,l.Wm)(i,{name:W.value?"visibility_off":"visibility",class:"cursor-pointer",onClick:a[6]||(a[6]=e=>W.value=!W.value)},null,8,["name"])])),_:1},8,["modelValue","type","rules"]),(0,l.Wm)(s,{debounce:"500",modelValue:(0,o.SU)(C).password_confirmation,"onUpdate:modelValue":a[9]||(a[9]=e=>(0,o.SU)(C).password_confirmation=e),label:"Confirm Password",type:V.value?"password":"text",rules:[e=>e==(0,o.SU)(C).password||"Password Does not match"]},{append:(0,l.w5)((()=>[(0,l.Wm)(i,{name:V.value?"visibility_off":"visibility",class:"cursor-pointer",onClick:a[8]||(a[8]=e=>V.value=!V.value)},null,8,["name"])])),_:1},8,["modelValue","type","rules"]),(0,l.Wm)(Z,{align:"right"},{default:(0,l.w5)((()=>[(0,l.Wm)(_,null,{default:(0,l.w5)((()=>[(0,l.Wm)(r,{type:"submit",loading:q.value,color:"primary",unelevated:"",label:"Finish"},{loading:(0,l.w5)((()=>[(0,l.Wm)(u)])),_:1},8,["loading"])])),_:1})])),_:1})])),_:1})])),_:1},8,["header-nav"])])),_:1},8,["modelValue"]),(0,l.Wm)(t)])),_:1})])])])),_:1})])),_:1})])}}};var W=t(3066),V=t(4379),q=t(151),k=t(5589),S=t(3518),C=t(6552),U=t(5269),Z=t(4842),x=t(4554),Q=t(9367),H=t(6877),I=t(2165),A=t(8719),P=t(7518),N=t.n(P);const F=_,R=F;N()(_,"components",{QLayout:W.Z,QPage:V.Z,QCard:q.Z,QCardSection:k.Z,QStepper:S.Z,QStep:C.Z,QForm:U.Z,QInput:Z.Z,QIcon:x.Z,QCardActions:Q.Z,QStepperNavigation:H.Z,QBtn:I.Z,QSpinnerFacebook:A.Z})}}]);